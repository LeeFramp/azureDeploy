{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
      "vmName": {
          "type": "string",
          "metadata": {
              "description": "Name of the Virtual Machine the disks are required for - used to build name of Disk and Storage URI"
          }
      },
      "storageAccountName": {
          "type": "string", 
          "metadata": {
              "description": "Name of storage account to contain disks"
          }
      },
      "diskArrayName": {
          "type": "string",
          "defaultValue": "NONE",
          "metadata": {
              "description": "Name of Disk Array name to return"
          }
      }
  },
  "variables": {
    "diskUriPrefix": "[concat('http://',parameters('storageAccountName'),'.blob.core.windows.net/vhds/',parameters('vmName'))]",
    "dataDiskArray": {
        "NONE": [],
        "applicationServer": [
            {
                "name": "[concat(parameters('vmName'),'-01')]",
                "lun": 0,
                "vhd": {
                "uri": "[concat(variables('diskUriPrefix'),'-01.vhd')]"
                },
                "createOption": "Empty",
                "caching": "none",
                "diskSizeGB": 1023
            }
        ],
        "webServer": [
            {
                "name": "[concat(parameters('vmName'),'-01')]",
                "lun": 0,
                "vhd": {
                "uri": "[concat(variables('diskUriPrefix'),'-01.vhd')]"
                },
                "createOption": "Empty",
                "caching": "none",
                "diskSizeGB": 1023
            },
            {
                "name": "[concat(parameters('vmName'),'-02')]",
                "lun": 1,
                "vhd": {
                "uri": "[concat(variables('diskUriPrefix'),'-02.vhd')]"
                },
                "createOption": "Empty",
                "caching": "none",
                "diskSizeGB": 1023
            }
        ],
        "databaseServer": [
            {
                "name": "[concat(parameters('vmName'),'-01')]",
                "lun": 0,
                "vhd": {
                "uri": "[concat(variables('diskUriPrefix'),'-01.vhd')]"
                },
                "createOption": "Empty",
                "caching": "none",
                "diskSizeGB": 1023
            },
            {
                "name": "[concat(parameters('vmName'),'-03')]",
                "lun": 2,
                "vhd": {
                "uri": "[concat(variables('diskUriPrefix'),'-03.vhd')]"
                },
                "createOption": "Empty",
                "caching": "none",
                "diskSizeGB": 1023
            },
            {
                "name": "[concat(parameters('vmName'),'-04')]",
                "lun": 3,
                "vhd": {
                "uri": "[concat(variables('diskUriPrefix'),'-04.vhd')]"
                },
                "createOption": "Empty",
                "caching": "none",
                "diskSizeGB": 1023
            },
            {
                "name": "[concat(parameters('vmName'),'-05')]",
                "lun": 4,
                "vhd": {
                "uri": "[concat(variables('diskUriPrefix'),'-05.vhd')]"
                },
                "createOption": "Empty",
                "caching": "none",
                "diskSizeGB": 1023
            },
            {
                "name": "[concat(parameters('vmName'),'-06')]",
                "lun": 5,
                "vhd": {
                "uri": "[concat(variables('diskUriPrefix'),'-06.vhd')]"
                },
                "createOption": "Empty",
                "caching": "none",
                "diskSizeGB": 1023
            },
            {
                "name": "[concat(parameters('vmName'),'-07')]",
                "lun": 6,
                "vhd": {
                "uri": "[concat(variables('diskUriPrefix'),'-07.vhd')]"
                },
                "createOption": "Empty",
                "caching": "none",
                "diskSizeGB": 1023
            }
        ]     
    }
  },
  "resources": [
      
  ],
  "outputs": {
    "dataDiskArray": {
      "type": "array",
      "value": "[variables('dataDiskArray')[parameters('diskArrayName')]]"
    }      
  }
}